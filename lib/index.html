<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>styleit - Development</title>
</head>
<style>
  #textEditor {
    position: fixed;
    top: 0;
    left: 50%;
    transform: translate(-50%, 0);
    background: #fff;
  }

  #root {
    margin-top: 140px;

  }

  #editor {
    min-height: 100px;
    background: rgb(240, 238, 238);
  }
</style>

<body>
  <div id="root">
    <div id="textEditor">

    </div>
    <div contenteditable="true" id="editor" spellcheck="false">
      <b>TextEditor-API concepts</b>
      <b></b>
      <u></u>
      <p>StyleIt.js is a simple text editor API built for Developers. <br> It
        outputs clean data in JSON instead of heavy HTML-markup for efficent data
        saving. <br> More important StyleIt.js knows how to use ANY Css rule.</p>
      <ul>
        <li>1. Clean data output</li>
        <li>2. Use of any CSS rules</li>
        <li>3. Style with classes</li>
      </ul>
      <h1>Getting started</h1>
      <h3>Installation</h3>

      1. Node package 2. Source from CDN 3. Local file from project

      <h3>Node module</h3>
      <h6>Install the package via npm</h6>
      <ul>
        <li><code>npm i styleit-api --save</code></li>
        <li>
          <p>Include the module in your application</p>
          <pre><code>import StyelIt from 'styleit-api';</code></pre>
        </li>
      </ul><br><br><br> ##Initialization
      <p>In order to inizialize StyleIt, you need to pass the Element Object or
        Element Id to the StyleIt constracture. Note that StyleIt will be
        available only on this element and its child nodes.</p>
      <div>
        <pre><code>import StyleIt from 'styleit-api';
<br><br><span style="margin-top: 20px;">const styleIt = new  StyleIt(*Element Object or Element Id*);</span></code></pre>
        <br><br></div>

      ##StyleIt provides two working modes
      <pre><code>import StyleIt from 'styleit-api';
cont modes = StyleIt.Modes</code></pre>
      <table style="width: 100%;">
        <tbody>
          <tr>
            <th>Mode</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
          <tr>
            <td>Toggle</td>
            <td>String</td>
            <td>Style elements with on/off functionality like
              bold,underline,italic</td>
          </tr>
          <tr>
            <td>Extend</td>
            <td>String</td>
            <td>Only extends the currect style font-size, color, backgorund</td>
          </tr>
        </tbody>
      </table>
      <div>Note that the Extend mod will not cancel the style when selecting the
        same rule twice.</div><br>
      ##How to use
    </div>
  </div>
  <style>
    .test {
      letter-spacing: 0.2em;
      -webkit-text-fill-color: transparent;
      -webkit-text-stroke-width: 1px;
      -webkit-text-stroke-color: #b50064;
      text-shadow: 3px 2px 20px #0a0a0a, 1px 3px 6px #ff0c0c;
    }
  </style>
  </div>
  <script>
    (function () {
      const init = () => {
        window.addEventListener('DOMContentLoaded', (event) => {
          const root = document.querySelector('#textEditor');

          document.body.appendChild(root);
          //================================================================
          const config = {
            onKeyPress: [
              [66, () => styleIt.ExecCmd("font-weight", "bold", styleIt.Modes.Toggle, {
                unWrap: ["b"]
              })],
              [85, () => styleIt.ExecCmd("text-decoration", "underline", styleIt.Modes.Toggle, {
                unWrap: ["u"]
              }),
              ],
              [73, () => styleIt.ExecCmd("font-style", "italic", styleIt.Modes.Toggle, {
                unWrap: ["i"]
              })]
            ],
            onInspect: (styles) => {
              inspect.innerHTML = `<code>${JSON.stringify(styles)}</code>`
            },
            //TODO:Rules
            rules: {
              filter: [{
                el: "DIV",
                replaceWith: "P"
              }]
            }
          }
          const styleIt = new styleit('editor', config);
         styleIt.On("inspect",(collectedStyled)=>{
          console.log(collectedStyled);
         });
         styleIt.On("paste",(html)=>{
          console.log("paste",html);
         });
         styleIt.On("inspectLink",(link)=>{
          console.log("inspectLink",link);
         });
          //================================================================
          const btns = [{
            text: "toggle class",
            onclick: () => styleIt.ToggleClass("test")
          },
          {
            text: "B:Block",
            onclick: () => styleIt.ExecCmd("font-weight", "bold", styleIt.Modes.Toggle, {
              target: "block",
              as: "inline"
            })
          },
          {
            text: "B",
            onclick: () => styleIt.ExecCmd("font-weight", "bold", styleIt.Modes.Toggle, {
              unWrap: ["b"]
            })
          },

          {
            text: "U",
            onclick: () => styleIt.ExecCmd("text-decoration", "underline", styleIt.Modes.Toggle, {
              selection: true
            })
          },
          {
            text: "50px",
            onclick: () => styleIt.ExecCmd("font-size", "50px", styleIt.Modes.Extend)
          },
          {
            text: "30px",
            onclick: () => styleIt.ExecCmd("font-size", "30px", styleIt.Modes.Extend)
          },
          {
            text: "30px:Block",
            onclick: () => styleIt.ExecCmd("font-size", "30px", styleIt.Modes.Extend, {
              target: "block",
              as: "inline"
            })
          },
          {
            text: "Red",
            onclick: () => styleIt.ExecCmd("color", "red", styleIt.Modes.Extend)
          },
          {
            text: "yellow",
            onclick: () => styleIt.ExecCmd("color", "yellow", styleIt.Modes.Extend)
          },
          {
            text: "blue",
            onclick: () => styleIt.ExecCmd("color", "blue", styleIt.Modes.Extend)
          },
          {
            text: "green",
            onclick: () => styleIt.ExecCmd("color", "green", styleIt.Modes.Extend)
          },
          {
            text: "left",
            onclick: () => styleIt.ExecCmd("text-align", "left", styleIt.Modes.Extend, {
              target: 'block'
            })
          },
          {
            text: "center",
            onclick: () => {
              styleIt.ExecCmd("text-align", "center", styleIt.Modes.Extend, {
                target: 'block'
              })
            }
          },
          {
            text: "right",
            onclick: () => styleIt.ExecCmd("text-align", "right", styleIt.Modes.Extend, {
              target: 'block'
            })
          },
          ]
          btns.forEach(btn => {
            const _btn = root.addElement('button');
            _btn.onclick = btn.onclick;
            _btn.innerHTML = btn.text;
          });
          const https = root.addElement("button");
          https.innerHTML = "https://helloworld.com"
          https.onclick = () =>{
            styleIt.Link({
              href:"https://helloworld.com",
              target:"_parent"
            })
          }
          const mailto = root.addElement("button");
          mailto.innerHTML = "mailto:adilev3344@gmail.com"
          mailto.onclick = () =>{
            styleIt.Link({
              href:"adilev3344@gmail.com",
              protocol:"mailto:"
            })
          }
          const tel = root.addElement("button");
          tel.innerHTML = "tel:0505891010"
          tel.onclick = () =>{
            styleIt.Link({
              href:"0505891010",
              protocol:"tel"
            })
          }
          const unLinker = root.addElement("button");
          unLinker.innerHTML = "unLink"
          unLinker.onclick = () =>{
            styleIt.UnLink();
          }
          const slider = root.addElement('input');
          slider.type = "range";
          slider.step = "1";
          slider.value = 0;
          slider.oninput = (e) => {
            console.log(e.target.value)
            styleIt.ExecCmd("font-size", `${e.target.value}px`, styleIt.Modes.Extend)
          }
          root.addElement('div');
          const key = root.addElement('input');
          const value = root.addElement('input');

          const ok = root.addElement('button');
          ok.innerHTML = "go"
          ok.onclick = () => {
            styleIt.ExecCmd(key.value, value.value, styleIt.Modes.Extend);
          }

          const inspect = root.addElement('div');
          const save = root.addElement('button');
          save.innerHTML = "Save"
          let savedData;
          save.onclick = () => {
            savedData = styleIt.Save();
            inspect.innerHTML = JSON.stringify(savedData);
          }

          const load = root.addElement('button');
          load.innerHTML = "Load"
          load.onclick = () => {
            if (savedData)
              styleIt.Load(savedData);
          }
          const destroy = root.addElement('button');
          destroy.innerHTML = "Destroy";
          destroy.onclick = () => {
            styleIt.Destroy();
          }
        });
      }
      init();
      Element.prototype.addElement = function (type) {
        const element = document.createElement(type);
        this.appendChild(element);
        return element;
      }

    })();
  </script>
<script src="styleit-api.js"></script></body>

</html>