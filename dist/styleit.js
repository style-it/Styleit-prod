/*! For license information please see styleit.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("styleit",[],t):"object"==typeof exports?exports.styleit=t():e.styleit=t()}("undefined"!=typeof self?self:this,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e){e.exports=JSON.parse('{"0":"holder","1":"block"}')},function(e,t,n){e.exports=n(4).default},function(e){e.exports=JSON.parse("{}")},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){var t="function"==typeof Map?new Map:void 0;return(i=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return c(e,arguments,u(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,e)})(e)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(){return(c=a()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&l(o,n.prototype),o}).apply(null,arguments)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,u(t).call(this))}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),n=t,(i=[{key:"connectedCallback",value:function(){this.innerHTML="&#8203;"}}])&&r(n.prototype,i),a&&r(n,a),t}(i(HTMLElement));customElements.define("text-selection",s)},function(e,t,n){"use strict";function r(){return function(){for(var e=[],t=window.getSelection(),n=0;n<t.rangeCount;n++)e[n]=t.getRangeAt(n);return e}().map((function(e){return function(e,t){var n;void 0===t&&(t=window.getSelection().getRangeAt(0));if(t.isCollapsed)return[];void 0===e&&(e="span");"string"==typeof e&&(e=document.createElement(e));return n=function(e,t){var n=t.startContainer,r=t.endContainer,o=t.startOffset,i=t.endOffset;return function(t){var a=document.createRange(),c=e.cloneNode();return a.selectNodeContents(t),t===n&&3===n.nodeType&&(a.setStart(t,o),n=c,o=0),t===r&&3===r.nodeType&&(a.setEnd(t,i),r=c,i=1),a.surroundContents(c),c}}(e,t),a(t).map(n)}(void 0,e)})).flat()}function o(e){for(var t=((e=e||document.body).ownerDocument||document).createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1),n=[],r=t.nextNode();r;)n.push(r),r=t.nextNode();return n}function i(e,t){return e.intersectsNode?e.intersectsNode(t):(n=e,r=function(e){var t=e.ownerDocument.createRange();try{t.selectNode(e)}catch(n){t.selectNodeContents(e)}return t}(t),-1===n.compareBoundaryPoints(Range.END_TO_START,r)&&1===n.compareBoundaryPoints(Range.START_TO_END,r));var n,r}function a(e){var t=e.commonAncestorContainer;return o(t.parentNode||t).filter((function(t){return i(e,t)&&function(e){return e.textContent.length>0}(t)}))}function c(e,t){document.getSelection().setBaseAndExtent(e,0,t,t.childNodes.length),[e,t].forEach((function(e){return e.unwrap()}))}function l(e,t){var n=document.createElement("text-selection"),r=document.createElement("text-selection");return e.prepend(n),t.appendChild(r),{firstFlag:n,lastFlag:r}}n.r(t);var u={Toggle:"toggle",Extend:"extend",Tag:"Tag"},s=void 0;function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"isElement",value:function(e){try{return e instanceof HTMLElement}catch(t){return"object"===f(e)&&1===e.nodeType&&"object"===f(e.style)&&"object"===f(e.ownerDocument)}}},{key:"wrap",value:function(e,t){var n=[],r=(n=Array.isArray(e)?e:[e]).map((function(e){return e.parentNode}));if(0===r.filter((function(e,t,n){return n[0]!==e})).length)return r[0].insertBefore(t,n[0]),n.forEach((function(e){return t.appendChild(e)})),!0}}])&&d(t.prototype,n),r&&d(t,r),e}());function y(e){return Array.from(e.classList)}function h(e){function t(e){e.className||e.removeAttribute("class")}Array.from(e.querySelectorAll("span[class]")).concat(e).forEach((function(e){return function(e){t(e),Array.from(e.classList).forEach((function(n){Array.from(e.querySelectorAll("[class='".concat(n,"']"))).forEach((function(e){e.classList.remove(n),t(e)}))}))}(e)}))}function m(e,t){for(var n={},r=e.attributes,o=r.length-1;o>=0;o--)(t||!t&&"class"!==r[o].name&&"style"!==r[o].name)&&(n[r[o].name]||(n[r[o].name]=r[o].value));return n}Document.prototype.getSelectedElement=function(){var e=document.getSelection();if(null!==e){var t=e.anchorNode;if(null!==t){for(;3===t.nodeType;)t=t.parentNode;return t}return null}},Element.prototype.wrap=function(e){return"string"==typeof e&&(e=document.createElement(e)),s.parentNode.insertBefore(e,s),e.appendChild(s),e},Element.prototype.createSelection=function(){if(document.body.createTextRange){var e=document.body.createTextRange();e.moveToElementText(this),e.select()}else if(window.getSelection){var t=window.getSelection(),n=document.createRange();n.selectNodeContents(this),t.removeAllRanges(),t.addRange(n)}},Element.prototype.ischildOf=function(e){if(!e)return!1;for(var t=this.parentNode;null!=t;){if(t===e)return!0;t=t.parentNode}return!1},Element.prototype.wrap=function(e){return!!this.parentNode&&(this.parentNode.insertBefore(e,this),e.appendChild(this),!0)},Element.prototype.insertAfter=function(e){this.parentNode.insertBefore(e,this.nextSibling)},Element.prototype.replaceNode=function(e){if(this.parentNode)return this.parentNode.insertBefore(e,this),this.remove(),e},Element.prototype.unwrap=function(){var e=document.createRange();e.selectNodeContents(this);var t=e.extractContents();return this.replaceNode(t),t},Element.prototype.removeClassName=function(e){Array.from(this.querySelectorAll("[class='".concat(e,"']"))).concat(this).forEach((function(t){return t.classList.remove(e)}))};n(2);function v(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var g=function(e){var t;if(!p.isElement(e))return null;if("SPAN"!==e.nodeName||e.nodeType!==Node.ELEMENT_NODE)return null;var n=e.firstElementChild;if(!n)return null;if("SPAN"!==n.nodeName||n.nodeType!==Node.ELEMENT_NODE)return null;if(e.textContent!==n.textContent)return null;var r={style:k(e),classes:y(e),attrs:m(e)};for(var o in r.style){var i=r.style[o];n.style[o]=(n.style[o]+" "+i).trim()}for(var a in P(n),r.attrs){var c=r.attrs[a];n.setAttribute(a,c)}return(t=n.classList).add.apply(t,v(r.classes)),h(n),b(n),n.parentElement&&n.parentElement.unwrap(),n};function E(e,t){if(!p.isElement(e)||!p.isElement(t))return null;if("SPAN"!==e.nodeName||"SPAN"!==t.nodeName)return null;var n=[{style:k(e),classes:y(e),attrs:m(e)},{style:k(t),classes:y(t),attrs:m(t)}],r=function(e,t){if(!e||!t)return[];var n=v(e),r=v(t);return n.filter((function(e){return r.includes(e)}))}(n[0].classes,n[1].classes),o=function(e,t){var n={};for(var r in e)if(t[r]){var o=e[r],i=t[r];i===o&&(n[r]=i)}return n}(n[0].style,n[1].style),i=function(e,t){var n,r=document.createElement("span");for(var o in e)r.style[o]=e[o];t.length>0&&(n=r.classList).add.apply(n,v(t));return 0===r.attributes.length?(r.unwrap(),null):r}(o,r);if(!i)return null;var a=[e,t];return a.forEach((function(e){!function(e,t){var n;(n=e.classList).remove.apply(n,v(t)),h(e)}(e,r),function(e,t){for(var n in t)e.style[n]=null}(e,o)})),p.wrap(a,i),v(i.children).forEach((function(e){b(e)})),i}function b(e){var t=function(e){Array.from(e.children).forEach((function(e){t(e),n(e)}));var r=function(e){var t=!1;return Array.from(e.children).forEach((function(e){for(var n=e;null!==n;){var r=n.nextSibling;if(!r)break;n=E(n,r),t=t||null!==n}})),t},o=function(e){var t=!1;return Array.from(e.children).forEach((function(e){for(var n=e;null!==n;)n=g(n),t=t||null!==n})),t},i=!1;do{n(e),r(e),i=o(e)}while(i)};function n(e){if(e.normalize(),h(e),P(e),e&&"SPAN"===e.nodeName&&(!e.textContent.trim()||0===e.attributes.length)){var t=e.unwrap();return t.normalize(),t.parentElement}}e.normalize(),t(e)}var w={"#text":"#text",P:"P",SPAN:"SPAN",A:"A",DIV:"DIV",BR:"BR"},S=n(0);function N(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function T(){var e=document.getSelection();if(null!==e){var t=e.anchorNode;if(null!==t){for(;3===t.nodeType;)t=t.parentNode;return t}return null}}function C(e,t){var n=function(e){var t,n,r=w[e.tag];switch(r){case w["#text"]:t=document.createTextNode(e.textContent);break;case w.A:(t=document.createElement(r)).href=e.href,t.target=e.target;break;case w.SPAN:case w.DIV:case w.P:t=document.createElement(r),n=!0;break;case w.BR:t=document.createElement(r)}return n&&t&&function(e,t){if(e.classList&&(t.classList=N(e.classList)),e.style){var n=function(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];t.push("".concat(n,":").concat(r))}return t.join(";")}(e.style);t.style=n}}(e,t),t};return t||e.type!==S[0]||(t=n(e)),Array.isArray(e.children)&&e.children.forEach((function(e){var r=n(e);r&&(t.appendChild(r),C(e,r))})),t}function A(e,t){"number"!=typeof t&&(t=0);var n=w[e.nodeName],r={},o=!0;switch(S[t]&&(r.type=S[t],t++),n){case w["#text"]:r.tag=n,r.textContent=e.textContent.replace(/\u200B/g,""),r.textContent.trim()||(o=!1);break;case w.A:r.tag=n,r.href=e.href,r.target=e.target;break;case w.DIV:case w.SPAN:case w.BR:case w.P:r.tag=n}if(!o)return null;var i=k(e);return Object.keys(i).length>0&&(r.style=i),e.classList&&e.classList.length>0&&(r.classList=N(e.classList)),e.childNodes&&e.childNodes.length>0&&(r.children=N(e.childNodes).map((function(e){return A(e,t)})).filter((function(e){return e}))),r}function x(e,t){for(var n={},r=e;r&&r.ischildOf(t.parentElement);){var o=k(r);for(var i in o)if(o.hasOwnProperty(i)){var a=o[i];n[i]||(n[i]=a)}r=r.parentElement}return n}function L(e,t,n,r){e.style[t]=r?e.style[t]+" "+n:e.style[t].replace(n,""),P(e),h(e),Array.from(e.querySelectorAll("[style*='".concat(n,"']"))).forEach((function(e){e.style[t]=e.style[t].replace(n,""),P(e),h(e)}))}function O(e,t,n){var r;e.style[t]=n,"color"===t&&(r={element:e,key:"color",value:n},[function(e){if("color"===e.key){var t=e.element.closest("[style*='text-decoration']");if(t){var n=j(e.element,t);if(n)for(var r in P(),O(n.center,"text-decoration-color","".concat(e.value)),n)b(n[r]);else O(t,"text-decoration-color","".concat(e.value))}}}].forEach((function(e){return e(r)}))),Array.from(e.querySelectorAll("[style*='".concat(t,"']"))).forEach((function(e){e.style[t]=null,P(e)}))}var D=function(e){return x(T(),e)};function P(e){if(!e)return null;if(e.getAttribute("style")){var t=k(e),n=function(n){t.hasOwnProperty(n)&&Array.from(e.querySelectorAll("[style*='".concat(t[n],"']"))).forEach((function(e){e.style[n]=null,P(e)}))};for(var r in t)n(r)}else e.removeAttribute("style")}function k(e){if(!e||!e.style)return{};var t={},n=e.getAttribute("style");if(n){var r=n.split(";");Array.isArray(r)&&r.forEach((function(e){var n=e.split(":");n[1]&&n[0]&&(t[n[0].trim()]=n[1].trim())}))}return t}function j(e,t){if(!e.ischildOf(t))return null;if(!p.isElement(e)||!p.isElement(t))return null;var n=function(e,t){var n=x(e,t),r=function(e,t){for(var n={},r=e;r&&r.ischildOf(t.parentElement);){for(var o=r.attributes,i=o.length-1;i>=0;i--)"class"!==o[i].name&&"style"!==o[i].name&&(n[o[i].name]||(n[o[i].name]=o[i].value));r=r.parentElement}return n}(e,t),o=function(e,t){for(var n=[],r=e;r&&r.ischildOf(t.parentElement);){var o=r.classList;Array.from(o).forEach((function(e){n.findIndex((function(t){return t===e}))<0&&n.push(e)})),r=r.parentElement}return n}(e,t),i=document.createElement("span");for(var a in i.className=o.join(" "),n){var c=n[a];i.style[a]=c}for(var l in r){var u=r[l];i.setAttribute(l,u)}return i};e.createSelection();var r=n(document.getSelectedElement(),t);r.appendChild(e);var o=window.getSelection().getRangeAt(0);o.setStart(t,0);var i=n(document.getSelectedElement(),t),a=o.extractContents();i.appendChild(a),o.setEnd(t,t.childNodes.length);var c=n(document.getSelectedElement(),t),l=o.extractContents();c.appendChild(l);var u={left:i,center:r,right:c};for(var s in t.innerHTML="",u){var f=u[s];t.appendChild(f)}return t.unwrap(),u}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var M=function(){function e(t){var n=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uniqeID="styleit-copy-paste-on-action",!t)return null;this.target=t,this.onPaste=function(e){var t,r=e.clipboardData.getData("text/html"),o=(t=r,(new DOMParser).parseFromString(t,"text/html").body).querySelector(".".concat(n.uniqeID));if(o){!function(e){var t,n;if(window.getSelection&&(t=window.getSelection()).getRangeAt&&t.rangeCount){(n=t.getRangeAt(0)).deleteContents();var r=document.createElement("div");r.innerHTML=e;for(var o,i,a=document.createDocumentFragment();o=r.firstChild;)i=a.appendChild(o);n.insertNode(a),i&&((n=n.cloneRange()).setStartAfter(i),n.collapse(!0),t.removeAllRanges(),t.addRange(n))}}(o.outerHTML);var i=n.target.querySelector(".".concat(n.uniqeID));i&&(Array.from(i.querySelectorAll("span")).forEach((function(e){var t=k(e);for(var n in P(e),t)if(t.hasOwnProperty(n)){var r=e.parentElement.closest("[style*='".concat(n,"']"));r&&j(e,r)}})),Array.from(n.target.querySelectorAll(".".concat(n.uniqeID))).forEach((function(e){return e.classList.remove(n.uniqeID)})),b(n.target))}else{var a=(e.clipboardData||window.clipboardData).getData("text"),c=window.getSelection();if(!c.rangeCount)return!1;c.deleteFromDocument(),c.getRangeAt(0).insertNode(document.createTextNode(a))}e.preventDefault()},this.onCopy=function(e){var t=r();t.length;var o=t.map((function(e){return function(e,t){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];e.style[n]=r}}(e,x(e,n.target)),e.cloneNode(!0)})),i=l(t[0],t[t.length-1]),a=i.firstFlag,u=i.lastFlag;t.forEach((function(e){return e.unwrap()})),c(a,u),n.target.normalize();var s=document.createElement("span");o=o.reduce((function(e,t){return"SPAN"===t.nodeName&&e.push(t.outerHTML),e}),[]),s.innerHTML=o.join(""),s.className=n.uniqeID,e.clipboardData.setData("text/html",s.outerHTML),e.preventDefault()},this.target.addEventListener("paste",this.onPaste),this.target.addEventListener("copy",this.onCopy)}var t,n,o;return t=e,(n=[{key:"Destroy",value:function(){this.target.removeEventListener("paste",this.onPaste),this.target.removeEventListener("copy",this.onCopy),this.target=null}}])&&R(t.prototype,n),o&&R(t,o),e}();var _=function e(t,n){var r=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)return null;this.onInspect=n,this.target=t;var o=function(){var e=D(r.target);"function"==typeof r.onInspect&&r.onInspect(e)};this.onKeyDown=function(e){if(8===e.keyCode&&r.target.children.length<=1&&!r.target.textContent)return e.preventDefault(),!1;o()},this.onClick=function(){o()},this.target.addEventListener("click",this.onClick),this.target.addEventListener("keydown",this.onKeyDown),this.Destroy=function(){r.target.removeEventListener("click",r.onClick),r.target.removeEventListener("keydown",r.onKeyDown),r.target=null}};function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var H=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"Connect",value:function(e,t){if("string"==typeof e){if(!(e=document.getElementById(e)))return null}else if(!p.isElement(e))return null;return this.RenderInnerHTML(e),this.plugins=this.usePlugins(e,t),e}},{key:"usePlugins",value:function(e,t){return{copyPaste:new M(e),inspector:new _(e,t.onInspect)}}},{key:"RenderInnerHTML",value:function(e){var t,n=C(A(e));(t=e,new Promise((function(e){for(;t.firstElementChild;)t.firstElementChild.remove();e()}))).then((function(){return e.innerHTML=n.innerHTML}))}},{key:"Destroy",value:function(){for(var e in this.plugins)this.plugins.hasOwnProperty(e)&&this.plugins[e].Destroy()}}])&&I(t.prototype,n),r&&I(t,r),e}();n(3);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var V=function(){function e(t,n){var r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__config={onInspect:void 0},this.Connector=new H,this.modeHandlers=(B(r={},u.Toggle,(function(e,t,n,r){return o.onToggle(e,t,n,r)})),B(r,u.Extend,(function(e,t,n){return o.onExtend(e,t,n)})),r),this.config=n?Object.assign(this.__config,n):this.__config,this.events={styleChanged:this.config.onInspect},this.connectedElement=this.Connector.Connect(t,this.config)}var t,n,i;return t=e,(n=[{key:"Save",value:function(){return A(this.connectedElement)}},{key:"Load",value:function(e){return C(e,this.connectedElement)}},{key:"Destroy",value:function(){for(var e in this.Connector.Destroy(),this)this[e];this.connectedElement=null}},{key:"ToggleClass",value:function(e,t){if("string"!=typeof e)return null;var n=r();if(0!==n.length){("boolean"==typeof t?t:n[0].closest("[class='".concat(e,"']")))?n.forEach((function(t){if(t.parentElement){var n=t.parentElement.closest("[class='".concat(e,"']"));if(n){var r=j(t,n);r&&r.center.removeClassName(e)}}else t.removeClassName(e)})):n.forEach((function(t){return t.classList.add(e)}));var o=l(n[0],n[n.length-1]),i=o.firstFlag,a=o.lastFlag;b(this.connectedElement),c(i,a)}}},{key:"execCmd",value:function(e,t,n,i){var a=this;if(this.connectedElement.normalize(),o(this.connectedElement),n=n||u.Extend,this.options="object"===q(i)?i:{},this.isValid(e,t)){this.ELEMENTS=r();var s,f,d=l(this.ELEMENTS[0],this.ELEMENTS[this.ELEMENTS.length-1]),p=d.firstFlag,y=d.lastFlag;s=o(this.connectedElement),Array.isArray(s)||(s=[s]),s.forEach((function(e){e.nodeType===Node.TEXT_NODE&&e.parentElement&&"TEXT-SELECTION"!==e.parentElement.nodeName&&(e.textContent=e.textContent.replace(/\u200B/g,""))})),this.ELEMENTS.forEach((function(r){var o=a.modeHandlers[n](r,e,t,f);n===u.Toggle&&void 0===f&&(f=o)})),b(this.connectedElement),c(p,y),this.dispatchEvent("styleChanged",D(this.connectedElement))}}},{key:"dispatchEvent",value:function(e,t){this.events[e]&&this.events[e](t)}},{key:"onToggle",value:function(e,t,n,r){var o=e.closest("[style*='".concat(n,"']"));if(o){void 0===r&&(r=!1);var i=j(e,o);if(i&&(L(i.center,t,n,r),1===this.ELEMENTS.length&&!this.ELEMENTS[0].textContent.trim())){i.center.innerHTML+="&#8203;";var a=document.createElement("span");a.innerHTML="&#8203;",i.center.appendChild(a),function(e,t){var n=e;n.focus();var r=Array.from(n.childNodes).filter((function(e){return e.nodeType===Node.TEXT_NODE})),o=t,i=document.createRange();i.setStart(r[0],o),i.setEnd(r[0],o);var a=window.getSelection();a.removeAllRanges(),a.addRange(i)}(a)}}else void 0===r&&(r=!0),L(e,t,n,r),b(e);return r}},{key:"onExtend",value:function(e,t,n){var r=e.closest("[style*='".concat(t,"']"));if(r){var o=j(e,r);o&&O(o.center,t,n)}else O(e,t,n)}},{key:"isValid",value:function(e,t){if(!this.connectedElement)return!1;if("true"!==this.connectedElement.contentEditable)return!1;if("string"!=typeof e&&"string"!=typeof t)return!1;var n=T();return!(!n||!n.ischildOf(this.connectedElement)&&n!==this.connectedElement)||void 0}}])&&F(t.prototype,n),i&&F(t,i),e}();n.d(t,"default",(function(){return z}));var z=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=new V(t,n);r&&(this.ExecCmd=r.execCmd,this.ToggleClass=r.ToggleClass,this.Save=r.Save,this.Load=r.Load,this.Destroy=r.Destroy,this.Modes=u,this.ToggleClass=this.ToggleClass.bind(r),this.ExecCmd=this.ExecCmd.bind(r),this.Save=this.Save.bind(r),this.Load=this.Load.bind(r),this.Destroy=this.Destroy.bind(r))}}])}));
//# sourceMappingURL=main.js.map
//# sourceMappingURL=styleit.js.map